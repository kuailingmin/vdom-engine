/*!
 * vdom-engine.js v0.1.6
 * (c) 2016 Jade Gu
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("path-to-regexp"),require("history/lib/createBrowserHistory"),require("history/lib/createHashHistory"),require("history/lib/useQueries"),require("history/lib/useBeforeUnload"),require("history/lib/useBasename")):"function"==typeof define&&define.amd?define(["path-to-regexp","history/lib/createBrowserHistory","history/lib/createHashHistory","history/lib/useQueries","history/lib/useBeforeUnload","history/lib/useBasename"],n):e.Vengine=n(e.pathToRegexp,e.createHistory,e.createHashHistory,e.useQueries,e.useBeforeUnload,e.useBasename)}(this,function(e,n,t,r,o,a){"use strict";function c(e){return"function"==typeof e}function u(e){return null!=e&&c(e.then)}function l(e){return e()}function f(){}function d(e){return e}function s(e,n){return function(){return e.apply(this,arguments),n.apply(this,arguments)}}function p(e,n,t){for(var r=e.length,o=-1;r--;){var a=e[++o];Ce(a)?p(a,n,t):n(a,t)}}function v(e,n){e[e.length]=n}function h(e,n){if(!n)return e;for(var t=Object.keys(n),r=t.length;r--;)e[t[r]]=n[t[r]];return e}function y(){return++Be}function m(e,n){return e+n.charAt(0).toUpperCase()+n.substring(1)}function g(e,n){var t=e.type,r=e.props,o=t(r,n);if(o&&o.render&&(o=o.render()),null===o||o===!1)o={vtype:VCOMMENT,uid:_.getUid()};else if(!o||!o.vtype)throw new Error("@"+t.name+"#render:You may have returned undefined, an array or some other invalid object");return o}function b(e){function n(e){a[e]=Te()}function t(e,n,t,r){var i=new Date,c=i.getHours()+":"+Ae(i.getMinutes())+":"+Ae(i.getSeconds()),u=(Te()-a[e]).toFixed(2),l=o+"-"+(t===r?"equal":"diff")+": action ["+e+"] end at "+c+", take "+u+"ms";try{console.groupCollapsed(l)}catch(e){try{console.group(l)}catch(e){console.log(l)}}if("log"===He)console[He](n),console[He](t),console[He](r);else{var f=r instanceof Error;console[He]("%c data","color: #03A9F4; font-weight: bold",n),console[He]("%c prev state","color: #9E9E9E; font-weight: bold",t),console[He]("%c "+(f?"error":"next state"),"color: #4CAF50; font-weight: bold",r)}try{console.groupEnd()}catch(e){console.log("-- log end --")}}var r=e.name,o=void 0===r?"store":r,a={};return{start:n,end:t}}function x(e){function n(e){var n=m.indexOf(e);return n===-1&&m.push(e),function(){var n=m.indexOf(e);n!==-1&&m.splice(i,1)}}function t(){return y}function r(e,n){return y=e,n||m.forEach(l),y}function o(e,n){var t=d[e];if(!c(t))throw new Error("Expected a function which is "+t);var o=t(y,n);return u(o)?o.then(r):(y!==o&&r(o),y)}function a(e,n){var t=f[e];if(!c(t))throw new Error("Expected a function which is "+t);var r=t(y,n);return r}var f=e.getter,d=e.setter,s=e.name,p=e.debug,v=e.initialState,h=null;p!==!1&&(h=b(s));var y=v,m=[],g={getState:t,replaceState:r,search:a,dispatch:o,subscribe:n};return d&&(g.actions=Object.keys(d).reduce(function(e,n){var t=0;return e[n]=function(e){var r=n+"*"+t++,a=y,i=y,c=function(n){h&&h.end(r,e,a,n)};h&&h.start(r);try{i=o(n,e)}catch(e){return c(e),i}return u(i)?i.then(c,c):(c(i),i)},e},{})),f&&(g.selectors=Object.keys(f).reduce(function(e,n){return e[n]=a.bind(null,n),e})),g}function w(e){var n=e.map(k);return function(e){for(var t=N(e),r=0,o=n.length;r<o;r++){var a=n[r],i=a.regexp.exec(t);if(i){var c=E(i,a.keys),u=a.controller;return{params:c,controller:u}}}}}function k(n){var t=h({},n),r=t.keys=[];return t.regexp=e(t.path,r),t}function E(e,n){for(var t={},r=1,o=e.length;r<o;r++){var a=n[r-1];a&&("string"==typeof e[r]?t[a.name]=decodeURIComponent(e[r]):t[a.name]=e[r])}return t}function N(e){return e.replace(/\/\//g,"/")}function U(e,n){je[e]=n}function C(e){delete je[e]}function B(e){var n=e.match(Re);if(n)return Me=n[2],je[n[1]]}function O(e,n,t){var r=B(n);r&&r.attach(e,Me,t)}function S(e,n){var t=B(n);t&&t.detach(e,Me)}function I(e,n){for(var t in n)"children"!==t&&null!=n[t]&&O(e,t,n[t])}function H(e,n,t){for(var r in n)if("children"!==r){var o=t[r];o!==n[r]&&(null==o?S(e,r):O(e,r,o))}for(var r in t)"children"!==r&&(r in n||O(e,r,t[r]))}function A(e,n){var t={},r=null;if(null!=n)for(var o in n)"key"===o?void 0!==n.key&&(r=""+n.key):t[o]=n[o];var a=e.defaultProps;if(a)for(var o in a)void 0===t[o]&&(t[o]=a[o]);var i=arguments.length,c=Ue;if(i>2){c=[];for(var u=2;u<i;u++){var l=arguments[u];Ce(l)?p(l,R,c):R(l,c)}}t.children=c;var f=null;if("string"==typeof e)f=qe;else{if("function"!=typeof e)throw new Error("unexpect type [ "+e+" ]");f=Le}var d={vtype:f,type:e,props:t,key:r};return f===Le&&(d.uid=y()),d}function T(e){return null!=e&&!!e.vtype}function j(e){var n=function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return A.apply(void 0,[e].concat(t))};return n.type=e,n}function R(e,n){null!=e&&"boolean"!=typeof e&&(n[n.length]=e.vtype?e:""+e)}function M(e,n,t){e[n]=t}function F(e,n){e[n]=""}function V(e,n,t){e.setAttribute(n,t+"")}function q(e,n){e.removeAttribute(n)}function L(e,n,t){P(e.style,n,t)}function D(e,n){e.style[n]=""}function P(e,n,t){!_.isUnitlessNumber[n]&&_.RE_NUMBER.test(t)?t+="px":null!=t&&"boolean"!=typeof t||(t=""),"float"===n&&(n="cssFloat"),e[n]=t}function z(e,n){e.eventStore=null;for(var t in n)0===t.indexOf("on-")&&(t=$(t),en[t]&&(e[t]=null))}function $(e){return e.replace(/^on-/,"on").toLowerCase()}function Q(e,n,t){if(n="on"+n,1===en[n])return void(e[n]=t);var r=e.eventStore||(e.eventStore={});r[n]=t,an[n]||(document.addEventListener(n.substr(2),G,!1),an[n]=!0),tn&&n===on&&e.addEventListener("click",rn,!1);var o=e.nodeName;"onchange"!==n||"INPUT"!==o&&"TEXTAREA"!==o||Q(e,"oninput",t)}function W(e,n){if(n="on"+n,1===en[n])return void(e[n]=null);var t=e.eventStore||(e.eventStore={});delete t[n],tn&&n===on&&e.removeEventListener("click",rn,!1);var r=e.nodeName;"onchange"!==n||"INPUT"!==r&&"TEXTAREA"!==r||delete t.oninput}function G(e){for(var n=e.target,t=e.type,r="on"+t,o=null;n;){var a=n,i=a.eventStore,c=i&&i[r];if(c){if(o||(o=X(e)),o.currentTarget=n,c.call(n,o),o.$cancalBubble)break;n=n.parentNode}else n=n.parentNode}}function X(e){var n={},t=function(){return n.$cancalBubble=!0};n.nativeEvent=e,n.persist=f;for(var r in e)"function"!=typeof e[r]?n[r]=e[r]:"stopPropagation"===r||"stopImmediatePropagation"===r?n[r]=t:n[r]=e[r].bind(e);return n}function Y(e,n,t){var r=e.vtype,o=null;return r?r===qe?o=re(e,n,t):r===Le?o=ue(e,n,t):r===De&&(o=document.createComment("react-empty: "+e.uid)):o=document.createTextNode(e),o}function J(e,n,t,r){var o=e.vtype;return o===Le?le(e,n,t,r):o!==qe?t:(null!=e.props[Pe]?(ie(e,n,t,r),oe(n,t,r)):(K(e,n,t,r),ie(e,n,t,r)),t)}function K(e,n,t,r){var o={removes:[],updates:[],creates:[]};ae(o,e,n,t,r),p(o.removes,ee),p(o.updates,Z),p(o.creates,ne)}function Z(e){if(e){var n=e.node;if(e.shouldUpdate){var t=e.vnode,r=e.newVnode,o=e.context;t.vtype?t.vtype===qe?ie(t,r,n,o):t.vtype===Le&&(n=le(t,r,n,o)):n.nodeValue=r}if(e.index!==e.fromIndex){var a=n.parentNode.childNodes[index];a!==n&&n.parentNode.insertBefore(n,a)}}}function ee(e){te(e.vnode,e.node),e.node.parentNode.removeChild(e.node)}function ne(e){var n=e.parentNode,t=n.childNodes[e.index],r=Y(e.vnode,e.context,n.namespaceURI);n.insertBefore(r,t)}function te(e,n){var t=e.vtype;t===qe?ce(e,n):t===Le&&fe(e,n)}function re(e,n,t){var r=e.type,o=e.props,a=null;return"svg"===r||t===Fe?(a=document.createElementNS(Fe,r),t=Fe):a=document.createElement(r),oe(a,o.children,n),I(a,o),o[ze]&&o[ze].call(null,a,o),o[$e]&&v(cn,{type:$e,node:a,props:o}),a}function oe(e,n,t){for(var r=e.namespaceURI,o=0,a=n.length;o<a;o++)e.appendChild(Y(n[o],t,r))}function ae(e,n,t,r,o){var a=r.childNodes,i=n.props.children,c=t.props.children,u=i.length,l=c.length;if(0!==u)if(0!==l){for(var f={},d=Array(l),s=null,p=null,h=0;h<u;h++)for(var y=i[h],m=0;m<l;m++)if(!d[m]){var g=c[m];if(y===g){var b=!1;o&&y.vtype===Le&&y.type.length>1&&(b=!0),d[m]={shouldUpdate:b,vnode:y,newVnode:g,node:a[h],context:o,index:m,fromIndex:h},f[h]=!0;break}}for(var h=0;h<u;h++)if(!f[h]){for(var x=i[h],w=!0,m=0;m<l;m++)if(!d[m]){var k=c[m];if(k.type===x.type&&k.key===x.key){d[m]={shouldUpdate:!0,vnode:x,newVnode:k,node:a[h],context:o,index:m,fromIndex:h},w=!1;break}}w&&(s||(s=[]),v(s,{vnode:x,node:a[h]}))}for(var h=0;h<l;h++){var E=d[h];E?E.vnode.vtype===qe&&ae(e,E.vnode,E.newVnode,E.node,E.context):(p||(p=[]),v(p,{vnode:c[h],parentNode:r,context:o,index:h}))}s&&v(e.removes,s),p&&v(e.creates,p),v(e.updates,d)}else for(var h=0;h<u;h++)v(e.removes,{vnode:i[h],node:a[h]});else{if(0===l)return;for(var h=0;h<l;h++)v(e.creates,{vnode:c[h],parentNode:r,context:o,index:h})}}function ie(e,n,t){var r=n.props;return r[Qe]&&r[Qe].call(null,t,r),H(t,e.props,r),r[We]&&r[We].call(null,t,r),t}function ce(e,n){for(var t=e.props,r=t.children,o=n.childNodes,a=0,i=r.length;a<i;a++)te(r[a],o[a]);c(t[_e])&&t[_e].call(null,n,t),z(n,t)}function ue(e,n,t){var r=g(e,n),o=Y(r,n,t);return o.cache=o.cache||{},o.cache[e.uid]=r,o}function le(e,n,t,r){var o=e.uid,a=t.cache[o];delete t.cache[o];var i=g(n,r),c=de(a,i,t,r);return c.cache=c.cache||{},c.cache[n.uid]=i,c!==t&&h(c.cache,t.cache),c}function fe(e,n){var t=e.uid,r=n.cache[t];delete n.cache[t],te(r,n)}function de(e,n,t,r){var o=t;return null==n?(te(e,t),t.parentNode.removeChild(t)):e.type!==n.type||e.key!==n.key?(te(e,t),o=Y(n,r,t.namespaceURI),t.parentNode.replaceChild(o,t)):(e!==n||r)&&(o=J(e,n,t,r)),o}function se(e,n,t,r){if(!e.vtype)throw new Error("cannot render "+e+" to container");U("attr",Ke),U("prop",Je),U("on",nn),U("css",Ze);var o=n[Ve]||(n[Ve]=y()),a=ln[o];if(c(t)&&(r=t,t=void 0),a)return void(a===!0?ln[o]={vnode:e,context:t,callback:r}:(a.vnode=e,a.context=t,r&&(a.callback=a.callback?s(a.callback,r):r)));if(ln[o]=!0,fn.hasOwnProperty(o))de(fn[o],e,n.firstChild,t);else{for(var i=Y(e,t,n.namespaceURI),u=null;u=n.lastChild;)n.removeChild(u);n.appendChild(i)}fn[o]=e,un(),a=ln[o],ln[o]=null,"object"==typeof a&&se(a.vnode,n,a.context,a.callback),r&&r()}function pe(e){if(!e.nodeName)throw new Error("expect node");var n=e[Ve],t=null;return!!(t=fn[n])&&(te(t,e.firstChild),e.removeChild(e.firstChild),delete fn[n],delete ln[n],!0)}function ve(e){function n(){return"string"==typeof v?document.querySelector(v):v}function t(e){if(g&&g.pathname===e.pathname)return void(b&&b.update&&b.update(e));var n=m(e.pathname);if(!n)throw new Error("Did not match any route with pathname:"+e.pathname);var t=n.params,o=n.controller,a=typeof o,i=null;return e.params=t,g=e,"string"===a?void s(o,r):("function"===a&&(i=o(e)),void(u(i)?i.then(r):r(i)))}function r(e){b&&a();var n=b=new e(p),t=null,r=null;if(n.beforeLeave){var i=n.beforeLeave.bind(n);t=y.listenBefore(i)}if(n.beforeUnload){var c=n.beforeUnload.bind(n);r=y.listenBeforeUnload(c)}n.$unlisten=function(){t&&(t(),t=null),r&&(r(),r=null)},n.refreshView=o,h(n,k);var l=n.init(g);l!==!1&&(u(l)?l.then(o):o(l))}function o(e){d.render(e,n())}function a(){b&&(b.$unlisten(),b.destroy&&b.destroy(g),b=null)}function i(){x=y.listen(t),t(y.getCurrentLocation())}function c(){g=null,x&&(x(),x=null),a()}var l=e.routes,f=e.historySettings,d=e.viewEngine,s=e.loader,p=e.context,v=e.container,y=he(f),m=w(l),g=null,b=null,x=null,k={goReplace:y.replace,goTo:y.push,goIndex:y.go,goBack:y.goBack,goForward:y.goForward};return{start:i,stop:c}}function he(e){var n=dn[e.type];return n=dn.useBeforeUnload(n),n=dn.useQueries(n),(n=dn.useBasename(n))(e)}function ye(e,n,t){v(e.attrs,n+'="'+t+'"')}function me(e,n,t){!Oe[styleName]&&Ie.test(t)?t+="px":null!=t&&"boolean"!=typeof t||(t=""),t&&v(e.style,n+":"+t+";")}function ge(e,n){return U("attr",pn),U("css",vn),be(e,n)}function be(e,n){var t=e.vtype,r="";return t?t===qe?r=xe(e,n):t===Le&&(r=Ee(e,n)):r=e,r}function xe(e,n){var t={tagName:e.type,children:e.props.children,attrs:[],style:[]};return I(t,e.props),we(t)}function we(e,n){var t=e.tagName,r=(e.attrs,e.style,e.children),o=Ne(e),a=hn[t];return a?"<"+t+o+" />":"<"+t+o+">"+ke(r,n)+"</"+t+">"}function ke(e,n){for(var t=[],r=0,o=e.length;r<o;r++)v(t,be(e[r],n));return t.join("")}function Ee(e,n){var t=g(e,n),r=be(t,n);return r}function Ne(e){var n=e.attrs,t=e.style;return t.length&&v(n,'style="'+t.join("")+'"'),n.length?" "+n.join(" "):""}e="default"in e?e.default:e,n="default"in n?n.default:n,t="default"in t?t.default:t,r="default"in r?r.default:r,o="default"in o?o.default:o,a="default"in a?a.default:a;var Ue=[],Ce=Array.isArray,Be=0,Oe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridColumn:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Se=["Webkit","ms","Moz","O"];Object.keys(Oe).forEach(function(e){Se.forEach(function(n){Oe[m(n,e)]=1})});var Ie=/^-?\d+(\.\d+)?$/;Object.freeze||(Object.freeze=d);var He="info"in console?"info":"log",Ae=function(e){return("0"+e).slice(-2)},Te="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return(new Date).getTime()},je={},Re=/^([^-]+)-(.+)$/,Me=null,Fe="http://www.w3.org/2000/svg",Ve="liteid",qe=1,Le=2,De=3,Pe="prop-innerHTML",ze="hook-willMount",$e="hook-didMount",Qe="hook-willUpdate",We="hook-didUpdate",_e="hook-willUnmount",Ge="undefined"!=typeof window,Xe=!Ge,Ye={isClient:Ge,isServer:Xe,h:A,createElement:A,createFactory:j,isValidElement:T,addDirective:U,removeDirective:C,createMatcher:w,createStore:x},Je={attach:M,detach:F},Ke={attach:V,detach:q},Ze={attach:L,detach:D},en={onmouseleave:1,onmouseenter:1,onload:1,onunload:1,onscroll:1,onfocus:1,onblur:1,onrowexit:1,onbeforeunload:1,onstop:1,ondragdrop:1,ondragenter:1,ondragexit:1,ondraggesture:1,ondragover:1,oncontextmenu:1},nn={attach:Q,detach:W},tn="ontouchstart"in document,rn=function(){},on="onclick",an={},cn=[],un=function(){var e=cn.length;if(e){for(var n=cn,t=-1;e--;){var r=n[++t];r.props[r.type].call(null,r.node,r.props)}cn.length=0}},ln={},fn={},dn={createHistory:n,createHashHistory:t,useQueries:r,useBeforeUnload:o,useBasename:a},sn={createApp:ve,render:se,destroy:pe},pn={attach:ye},vn={attach:me},hn={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},yn={renderToString:ge},mn={};return h(mn,Ye),h(mn,sn),h(mn,yn),mn});